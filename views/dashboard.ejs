<%- include('./partials/header') %>

<main>
    <section class="dashboard-section">
        <h1>대시보드</h1>
        <div class="dashboard-cards">
            <div class="card">
                <h2>총 금액</h2>
                <p>₩10,000,000</p>
            </div>
            <div class="card">
                <h2>기록 수</h2>
                <p>120</p>
            </div>
            <div class="card">
                <h2>최근 업데이트</h2>
                <p>2023-10-01</p>
            </div>
        </div>

        <div class="graph-section">
            <h2>금액 추세</h2>
            <div id="financeChart" style="width: 100%; height: 400px;"></div>
        </div>
    </section>
</main>

<!-- ApexCharts (offline) -->
<script src="/js/apexcharts.min.js"></script>
<script>
    // Example data, can be replaced with dynamic EJS variables
    const chartData = {
        labels: ['1월', '2월', '3월', '4월', '5월', '6월'], 
        values: [1000000, 1500000, 1200000, 1800000, 2000000, 1700000]
    };

    const options = {
        chart: {
            type: 'line',
            height: 400,
            toolbar: { show: false }
        },
        series: [{
            name: '월별 금액',
            data: chartData.values
        }],
        xaxis: {
            categories: chartData.labels,
            title: { text: '월' }
        },
        yaxis: {
            title: { text: '금액 (₩)' },
            min: 0
        },
        stroke: {
            curve: 'smooth',
            width: 2
        },
        markers: {
            size: 4
        },
        tooltip: {
            y: {
                formatter: val => `₩${val.toLocaleString()}`
            }
        },
        legend: {
            position: 'top'
        }
    };

    const chart = new ApexCharts(document.querySelector("#financeChart"), options);
    chart.render();
</script>

<%- include('./partials/footer') %>
